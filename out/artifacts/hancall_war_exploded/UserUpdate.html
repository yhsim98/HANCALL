<!DOCTYPE html>
<html>
<head>
    <meta charset="EUC-KR">
    <title>유저 수정</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" >
        $(function(){
            userUpdate();
        });

        var token = localStorage.getItem("jwt");

        function userUpdate(){
            $('#btnInsert2').on('click',function(){
                var email = $('input:text[name="email2"]').val();
                var password = $('input:text[name="password2"]').val();
                var name = $('input:text[name="name"]').val();
                var nickname = $('input:text[name="nickname"]').val();
                var phone = $('input:text[name="phone"]').val();
                $.ajax({
                    url: "user/my",
                    type: 'PATCH',
                    dataType: 'json',
                    data: JSON.stringify({ email:email,password: password, name:name, nickname:nickname,
                        phone:phone}),
                    headers: {
                        Authorization: 'Bearer ' + token
                    },
                    contentType: 'application/json',
                    mimeType: 'application/json',
                    success: function() {
                        window.location.href = "UserDetail.html";
                    },
                    error:function(xhr, status, error) {
                        alert(" status: "+xhr.status+" er:");
                    }
                });
            });
        }

    </script>
</head>
<body>
<a href="UserDetail.html">유저정보화면 이동</a>

<div class="container">
    <form id="form2"  class="form-horizontal">
        <h2>유저 정보수정</h2>
        <div class="form-group">
            <label>이메일:</label>
            <input type="text"  class="form-control"  name="email2" >
        </div>
        <div class="form-group">
            <label>비밀번호:</label>
            <input type="text"  class="form-control"  name="password2" >
        </div>
        <div class="form-group">
            <label>이름:</label>
            <input type="text"  class="form-control"  name="name" >
        </div>
        <div class="form-group">
            <label>닉네임:</label>
            <input type="text"  class="form-control"  name="nickname" >
        </div>
        <div class="form-group">
            <label>전화번호:</label>
            <input type="text"  class="form-control"  name="phone" >
        </div>
        <div class="btn-group">
            <input type="button"  class="btn btn-primary" value="등록"  id="btnInsert2" />
        </div>
    </form>
</div>
<a href="boardList_Json.html">게시판 목록으로 이동</a>
</body>
</html>