<!DOCTYPE html>
<html>
<head>
    <meta charset="EUC-KR">
    <title>유저 관리</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" >
        $(function(){
            userLogin();

            userRegister();

        });

        function userLogin(){
            $('#btnInsert').on('click',function(){
                var email = $('input:text[name="email"]').val();
                var password = $('input:text[name="password"]').val();
                $.ajax({
                    url: "user/login",
                    type: 'POST',
                    dataType: 'json',
                    data: JSON.stringify({ email:email,password: password}),
                    contentType: 'application/json',
                    mimeType: 'application/json',
                    success: function(xhr) {
                        localStorage.setItem("jwt", xhr.token);
                        location.href = "boardList_Json.html";
                    },
                    error:function(xhr) {
                        console.log(xhr.message);
                        alert(" status: "+xhr.status+" er:"+ xhr.message);
                    }
                });
            });
        }

        function userRegister(){
            $('#btnInsert2').on('click',function(){
                var email = $('input:text[name="email"]').val();
                var password = $('input:text[name="password"]').val();
                var name = $('input:text[name="name"]').val();
                var nickname = $('input:text[name="nickname"]').val();
                var phone = $('input:text[name="phone"]').val();
                if(email == null || password == null || name == null || nickname == null || phone == null)
                    alert("전부 기입하여 주십시오");
                $.ajax({
                    url: "user",
                    type: 'POST',
                    dataType: 'json',
                    data: JSON.stringify({ email:email,password: password, name:name, nickname:nickname,
                            phone:phone}),
                    contentType: 'application/json',
                    mimeType: 'application/json',
                    success: function() {
                        alert("회원가입되었습니다");
                    },
                    error:function(xhr, code, message) {
                        console.log(message);
                        console.log(xhr.code);
                        alert(" status: "+xhr.status+" er:"+ xhr.message);
                    }
                });
            });
        }

    </script>
</head>
<body>
<div class="container">
    <form id="form1"  class="form-horizontal">
        <h2>유저 로그인</h2>
        <div class="form-group">
            <label>email:</label>
            <input type="text"  class="form-control"  name="email" >
        </div>
        <div class="form-group">
            <label>password:</label>
            <input type="text"  class="form-control"  name="password" >
        </div>
        <div class="btn-group">
            <input type="button"  class="btn btn-primary" value="등록"  id="btnInsert" />
        </div>
    </form>
</div>
<br/>
<div class="container">
    <form id="form2"  class="form-horizontal">
        <h2>유저 회원가입</h2>
        <div class="form-group">
            <label>email:</label>
            <input type="text"  class="form-control"  name="email" >
        </div>
        <div class="form-group">
            <label>password:</label>
            <input type="text"  class="form-control"  name="password" >
        </div>
        <div class="form-group">
            <label>이름:</label>
            <input type="text"  class="form-control"  name="name" >
        </div>
        <div class="form-group">
            <label>닉네임:</label>
            <input type="text"  class="form-control"  name="nickname" >
        </div>
        <div class="form-group">
            <label>전화번호:</label>
            <input type="text"  class="form-control"  name="phone" >
        </div>
        <div class="btn-group">
            <input type="button"  class="btn btn-primary" value="등록"  id="btnInsert2" />
        </div>
    </form>
</div>
<a href="boardList_Json.html">게시판 목록으로 이동</a>
</body>
</html>